<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ホームページテスト</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: sans-serif;
      overflow-x: hidden;
    }

    .wrapper {
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
    }

    .title {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    .title img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
    }

    .title img.absolute01 {
      mix-blend-mode: multiply;
    }
    
    .title img.absolute02 {
      mix-blend-mode: normal;
    }

    .page {
      width: 100vw;
      height: 100vh;
      flex: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      color: #fff;
    }

    .page:nth-child(2) { background: #0CABA8; }
    .page:nth-child(3) { background: #008F8C; }
    .page:nth-child(4) { background: #015958; }
    .page:nth-child(5) { background: #023535; }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="container">
      <!-- タイトルページ：画像重ね -->
      <div class="title">
        <img src="images/bsck.PNG" class="absolute01" />
        <img src="images/1.PNG" class="absolute02" data-parallax-front data-y="45%" />        
      </div>
      <div class="page">1</div>
      <div class="page">2</div>
      <div class="page">3</div>
      <div class="page">4</div>
    </div>
  </div>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const container = document.querySelector(".container");
    const sections = gsap.utils.toArray(".title, .page");

    gsap.to(container, {
      yPercent: -100 * (sections.length - 1),
      ease: "none",
      scrollTrigger: {
        trigger: ".wrapper",
        pin: true,
        scrub: 1,
        end: () => "+=" + container.offsetHeight
      }
    });

    const items = document.querySelectorAll("[data-parallax-front]"); // data-parallax-front属性を持つ要素を取得

// 各要素に対して処理を行う
for (const item of items) {
  const y = item.getAttribute("data-y") ?? "15%"; // itemのdata-y属性を取得。未設定の場合は'15%'をデフォルト値として使用
  const delay = parseFloat(item.getAttribute("data-delay")) || 0.4; // itemのdata-delay属性を数値に変換して取得。未設定の場合は'0.4'をデフォルト値として使用
  const target = item.children; // itemの直下の要素を取得

  gsap.fromTo(
    // gsap.fromToでアニメーションを設定
    target, // 対象の要素をtargetで指定
    {
      y: y // アニメーション開始時のy位置
    },
    {
      y: `-${y}`, // アニメーション終了時のy位置
      scrollTrigger: {
        // スクロールトリガーを設定
        trigger: item, // itemをトリガーとなる要素として指定
        start: "top bottom", // 要素の上端がビューポートの下端に達したときに開始
        end: "bottom top", // 要素の下端がビューポートの上端に達したときに終了
        scrub: delay // スクロールに追従してアニメーションを行う（デフォルトでは0.4秒の遅延）
      },
      ease: "none" // イージング関数を指定しない（線形アニメーション）
    }
  );
}
  </script>
</body>
</html>
